{"version":3,"file":"NseUpdaterManager.js","sourceRoot":"","sources":["NseUpdaterManager.ts"],"names":[],"mappings":"AAAA;;;GAGG;AAEH,OAAO,EAAE,WAAW,EAAE,MAAM,eAAe,CAAC;AAC5C,OAAO,EACL,mCAAmC,EACnC,6BAA6B,EAC7B,+BAA+B,EAC/B,eAAe,EACf,eAAe,GAChB,MAAM,gBAAgB,CAAC;AAExB,MAAM,oBAAoB,GAAG,yCAAyC,CAAC;AACvE,MAAM,aAAa,GAAG,uCAAuC,CAAC;AAE9D,MAAM,qBAAqB,GAAG,sCAAsC,CAAC;AACrE,MAAM,cAAc,GAAG,oCAAoC,CAAC;AAE5D,MAAM,CAAC,OAAO,OAAO,iBAAiB;IAC5B,OAAO,GAAG,EAAE,CAAC;IACb,OAAO,GAAG,EAAE,CAAC;IAErB,YAAY,OAAe;QACzB,IAAI,CAAC,OAAO,GAAG,GAAG,OAAO,IAAI,eAAe,EAAE,CAAC;QAC/C,IAAI,CAAC,OAAO,GAAG,GAAG,OAAO,IAAI,eAAe,EAAE,CAAC;IACjD,CAAC;IAID,KAAK,CAAC,qBAAqB,CAAC,eAAuB;QACjD,MAAM,oBAAoB,GAAG,GAAG,IAAI,CAAC,OAAO,IAAI,oBAAoB,EAAE,CAAC;QACvE,IAAI,gBAAgB,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,oBAAoB,CAAC,CAAC;QAExE,gBAAgB,GAAG,gBAAgB,CAAC,OAAO,CAAC,+BAA+B,EAAE,eAAe,CAAC,CAAC;QAC9F,MAAM,WAAW,CAAC,SAAS,CAAC,oBAAoB,EAAE,gBAAgB,CAAC,CAAC;IACtE,CAAC;IAED,KAAK,CAAC,sBAAsB,CAAC,OAAe;QAC1C,MAAM,aAAa,GAAG,GAAG,IAAI,CAAC,OAAO,IAAI,aAAa,EAAE,CAAC;QACzD,IAAI,SAAS,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;QAC1D,SAAS,GAAG,SAAS,CAAC,OAAO,CAAC,6BAA6B,EAAE,OAAO,CAAC,CAAC;QACtE,MAAM,WAAW,CAAC,SAAS,CAAC,aAAa,EAAE,SAAS,CAAC,CAAC;IACxD,CAAC;IAED,KAAK,CAAC,2BAA2B,CAAC,OAAe;QAC/C,MAAM,aAAa,GAAG,GAAG,IAAI,CAAC,OAAO,IAAI,aAAa,EAAE,CAAC;QACzD,IAAI,SAAS,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;QAC1D,SAAS,GAAG,SAAS,CAAC,OAAO,CAAC,mCAAmC,EAAE,OAAO,CAAC,CAAC;QAC5E,MAAM,WAAW,CAAC,SAAS,CAAC,aAAa,EAAE,SAAS,CAAC,CAAC;IACxD,CAAC;IAED,KAAK,CAAC,qBAAqB,CAAC,eAAuB;QACjD,MAAM,qBAAqB,GAAG,GAAG,IAAI,CAAC,OAAO,IAAI,qBAAqB,EAAE,CAAC;QACzE,IAAI,iBAAiB,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,qBAAqB,CAAC,CAAC;QAE1E,iBAAiB,GAAG,iBAAiB,CAAC,OAAO,CAAC,+BAA+B,EAAE,eAAe,CAAC,CAAC;QAChG,MAAM,WAAW,CAAC,SAAS,CAAC,qBAAqB,EAAE,iBAAiB,CAAC,CAAC;IACxE,CAAC;IAED,KAAK,CAAC,sBAAsB,CAAC,OAAe;QAC1C,MAAM,cAAc,GAAG,GAAG,IAAI,CAAC,OAAO,IAAI,cAAc,EAAE,CAAC;QAC3D,IAAI,UAAU,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;QAC5D,UAAU,GAAG,UAAU,CAAC,OAAO,CAAC,6BAA6B,EAAE,OAAO,CAAC,CAAC;QACxE,MAAM,WAAW,CAAC,SAAS,CAAC,cAAc,EAAE,UAAU,CAAC,CAAC;IAC1D,CAAC;IAED,KAAK,CAAC,2BAA2B,CAAC,OAAe;QAE/C,MAAM,cAAc,GAAG,GAAG,IAAI,CAAC,OAAO,IAAI,cAAc,EAAE,CAAC;QAC3D,IAAI,UAAU,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;QAC5D,UAAU,GAAG,UAAU,CAAC,OAAO,CAAC,mCAAmC,EAAE,OAAO,CAAC,CAAC;QAC9E,MAAM,WAAW,CAAC,SAAS,CAAC,cAAc,EAAE,UAAU,CAAC,CAAC;IAC1D,CAAC;CACF","sourcesContent":["/*\n * rise-expo-dengage\n * created by: Volkan Suner\n */\n\nimport { FileManager } from './FileManager';\nimport {\n  BUNDLE_SHORT_VERSION_TEMPLATE_REGEX,\n  BUNDLE_VERSION_TEMPLATE_REGEX,\n  GROUP_IDENTIFIER_TEMPLATE_REGEX,\n  DNE_TARGET_NAME,\n  DCE_TARGET_NAME,\n} from './iosConstants';\n\nconst entitlementsFileName = `DengageNotificationService.entitlements`;\nconst plistFileName = `DengageNotificationService-Info.plist`;\n\nconst entitlementsFileNameD = `DengageContentExtension.entitlements`;\nconst plistFileNameD = `DengageContentExtension-Info.plist`;\n\nexport default class NseUpdaterManager {\n  private dcePath = '';\n  private dnePath = '';\n\n  constructor(iosPath: string) {\n    this.dnePath = `${iosPath}/${DNE_TARGET_NAME}`;\n    this.dcePath = `${iosPath}/${DCE_TARGET_NAME}`;\n  }\n\n\n\n  async updateDNEEntitlements(groupIdentifier: string): Promise<void> {\n    const entitlementsFilePath = `${this.dnePath}/${entitlementsFileName}`;\n    let entitlementsFile = await FileManager.readFile(entitlementsFilePath);\n\n    entitlementsFile = entitlementsFile.replace(GROUP_IDENTIFIER_TEMPLATE_REGEX, groupIdentifier);\n    await FileManager.writeFile(entitlementsFilePath, entitlementsFile);\n  }\n\n  async updateDNEBundleVersion(version: string): Promise<void> {\n    const plistFilePath = `${this.dnePath}/${plistFileName}`;\n    let plistFile = await FileManager.readFile(plistFilePath);\n    plistFile = plistFile.replace(BUNDLE_VERSION_TEMPLATE_REGEX, version);\n    await FileManager.writeFile(plistFilePath, plistFile);\n  }\n\n  async updateDNEBundleShortVersion(version: string): Promise<void> {\n    const plistFilePath = `${this.dnePath}/${plistFileName}`;\n    let plistFile = await FileManager.readFile(plistFilePath);\n    plistFile = plistFile.replace(BUNDLE_SHORT_VERSION_TEMPLATE_REGEX, version);\n    await FileManager.writeFile(plistFilePath, plistFile);\n  }\n\n  async updateDCEEntitlements(groupIdentifier: string): Promise<void> {\n    const entitlementsFilePathD = `${this.dcePath}/${entitlementsFileNameD}`;\n    let entitlementsFileD = await FileManager.readFile(entitlementsFilePathD);\n\n    entitlementsFileD = entitlementsFileD.replace(GROUP_IDENTIFIER_TEMPLATE_REGEX, groupIdentifier);\n    await FileManager.writeFile(entitlementsFilePathD, entitlementsFileD);\n  }\n\n  async updateDCEBundleVersion(version: string): Promise<void> {\n    const plistFilePathD = `${this.dcePath}/${plistFileNameD}`;\n    let plistFileD = await FileManager.readFile(plistFilePathD);\n    plistFileD = plistFileD.replace(BUNDLE_VERSION_TEMPLATE_REGEX, version);\n    await FileManager.writeFile(plistFilePathD, plistFileD);\n  }\n\n  async updateDCEBundleShortVersion(version: string): Promise<void> {\n\n    const plistFilePathD = `${this.dcePath}/${plistFileNameD}`;\n    let plistFileD = await FileManager.readFile(plistFilePathD);\n    plistFileD = plistFileD.replace(BUNDLE_SHORT_VERSION_TEMPLATE_REGEX, version);\n    await FileManager.writeFile(plistFilePathD, plistFileD);\n  }\n}\n"]}
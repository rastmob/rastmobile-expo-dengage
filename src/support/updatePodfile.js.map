{"version":3,"file":"updatePodfile.js","sourceRoot":"","sources":["updatePodfile.ts"],"names":[],"mappings":"AAAA;;;GAGG;AACH,OAAO,EAAE,MAAM,IAAI,CAAC;AACpB,OAAO,EAAE,iBAAiB,EAAE,mBAAmB,EAAE,iBAAiB,EAAE,mBAAmB,EAAE,MAAM,gBAAgB,CAAC;AAChH,OAAO,EAAE,WAAW,EAAE,MAAM,eAAe,CAAC;AAC5C,OAAO,EAAE,cAAc,EAAE,MAAM,kBAAkB,CAAC;AAElD,MAAM,CAAC,KAAK,UAAU,aAAa,CAAC,OAAe;IACjD,MAAM,OAAO,GAAG,MAAM,WAAW,CAAC,QAAQ,CAAC,GAAG,OAAO,UAAU,CAAC,CAAC;IACjE,MAAM,OAAO,GAAG,OAAO,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;IACjD,MAAM,QAAQ,GAAG,OAAO,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;IAElD,IAAI,OAAO,EAAE;QACX,cAAc,CAAC,GAAG,CAAC,kFAAkF,CAAC,CAAC;KACxG;SAAM;QACL,EAAE,CAAC,UAAU,CAAC,GAAG,OAAO,UAAU,EAAE,mBAAmB,EAAE,CAAC,GAAG,EAAE,EAAE;YAC/D,IAAI,GAAG,EAAE;gBACP,cAAc,CAAC,KAAK,CAAC,0BAA0B,CAAC,CAAC;aAClD;QACH,CAAC,CAAC,CAAA;KACH;IAED,IAAI,QAAQ,EAAE;QACZ,cAAc,CAAC,GAAG,CAAC,sEAAsE,CAAC,CAAC;KAC5F;SAAM;QACL,EAAE,CAAC,UAAU,CAAC,GAAG,OAAO,UAAU,EAAE,mBAAmB,EAAE,CAAC,GAAG,EAAE,EAAE;YAC/D,IAAI,GAAG,EAAE;gBACP,cAAc,CAAC,KAAK,CAAC,0BAA0B,CAAC,CAAC;aAClD;QACH,CAAC,CAAC,CAAA;KACH;AACH,CAAC","sourcesContent":["/*\n * rise-expo-dengage\n * created by: Volkan Suner\n */\nimport fs from 'fs';\nimport { DCE_PODFILE_REGEX, DCE_PODFILE_SNIPPET, DNE_PODFILE_REGEX, DNE_PODFILE_SNIPPET } from './iosConstants';\nimport { FileManager } from './FileManager';\nimport { RiseDengageLog } from './RiseDengageLog';\n\nexport async function updatePodfile(iosPath: string) {\n  const podfile = await FileManager.readFile(`${iosPath}/Podfile`);\n  const matches = podfile.match(DNE_PODFILE_REGEX);\n  const matchesD = podfile.match(DCE_PODFILE_REGEX);\n\n  if (matches) {\n    RiseDengageLog.log(\"DengageNotificationServiceExtension target already added to Podfile. Skipping...\");\n  } else {\n    fs.appendFile(`${iosPath}/Podfile`, DNE_PODFILE_SNIPPET, (err) => {\n      if (err) {\n        RiseDengageLog.error(\"Error writing to Podfile\");\n      }\n    })\n  }\n\n  if (matchesD) {\n    RiseDengageLog.log(\"DengageContentExtension target already added to Podfile. Skipping...\");\n  } else {\n    fs.appendFile(`${iosPath}/Podfile`, DCE_PODFILE_SNIPPET, (err) => {\n      if (err) {\n        RiseDengageLog.error(\"Error writing to Podfile\");\n      }\n    })\n  }\n}\n"]}